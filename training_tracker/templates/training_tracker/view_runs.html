{% extends "training_tracker/__base.html" %}

{% load tt_extra_tags %}

{% block content %}

<h1>View Runs</h1>
<select class="runner-select">
    <!-- select an individual runner or display run history for all runners -->
    <option id="runner-select-all" value="all">All Runners</option>
    {% for run_history in run_histories %}
        <option id="runner-select-{{ run_history.runner_id }}" value="{{ run_history.runner_id }}">{{ run_history.runner }}</option>
    {% endfor %}
</select>
    
{% if run_histories %}
    <!-- for each runner who has runs recorded -->
    {% for run_history in run_histories %}
        <div class="">
            <!-- display a list of runs and a chart tracking the runners progress-->
            <div class="run-history-info row" id="run-history-info-{{ run_history.runner_id }}">
                <!-- display list -->
                <div class="run-history-list col-md-3 col-lg-3">
                    <h1>{{ run_history.runner }}</h1>
                    {% if run_history.runs %}
                    <ul>
                        {% for run in run_history.runs %}
                            <li>{{ run.date }} - {{ run.total_distance }} miles,
                                {% if run.hours %}{{ run.hours }}:{% endif %}{{ run.minutes|stringformat:"02d" }}:{{ run.seconds|stringformat:"02d" }}</li>
                                <ul>
                                    {% for mile in run.miles %}
                                        {% if not mile %}
                                            <li>Record miles please</li>
                                        {% endif %}
                                        <li>Mile {{ forloop.counter }}: {{ mile.minutes }}:{{ mile.seconds|stringformat:"02d" }}</li>
                                    {% endfor %}
                                </ul>
                        {% endfor %}
                    </ul>
                </div>

                <!-- display chart -->
                <div class="run-history-chart col-md-9 col-lg-9">
                    {% run_history_chart_context 1%}
                </div>
            </div>

            {% else %}

            <!-- if no runs for a runner -->
            <p>No runs to report</p>

            {% endif %}
        </div>
    {% endfor %}

{% else %}
<!-- if no runners -->
<p>No runs to report.</p>

{% endif %}

{% endblock %}